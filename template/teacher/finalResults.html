{% extends "teacher/base.html" %}
{% load static %}

{% block title %} Final Results {% endblock %}

{% block content %}
<main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
  <br />
  <h1 class="text-center">Final Results</h1>
  <br />

  <!-- Course Selection -->
  <form method="GET" action="">
      <div class="mb-3 row">
          <label for="course" class="col-sm-2 col-form-label">Select Course:</label>
          <div class="col-sm-4">
              <select name="course" id="course" class="form-select" onchange="this.form.submit()">
                  <option value="">-- Select Course --</option>
                  {% for course in course_instance %}
                      <option value="{{ course.id }}" {% if selected_course and selected_course.id == course.id %}selected{% endif %}>
                          {{ course.name }}
                      </option>
                  {% endfor %}
              </select>
          </div>
      </div>
  </form>

  {% if exam_instance %}
  <table class="table table-striped table-bordered">
      <thead>
          <tr>
              <th>#</th>
              <th>Student Name</th>
              <th>Course Name</th>
              <th>1st Semester Test Marks / 30</th>
              <th>1st Semester Exam Marks / 70</th>
              <th>2nd Semester Test Marks / 30</th>
              <th>2nd Semester Exam Marks / 70</th>
              <th>3rd Semester Test Marks / 30</th>
              <th>3rd Semester Exam Marks / 70</th>
          </tr>
      </thead>
      <tbody class="table-group-divider">
          {% for exam in exam_instance %}
          <tr>
              <th>{{ forloop.counter }}</th>
              <td>{{ exam.student.user.first_name }} {{ exam.student.user.last_name }}</td>
              <td>{{ exam.course.name }}</td>
              <td>{{ exam.first_semester_test_marks }}</td>
              <td>{{ exam.first_semester_exam_marks}}</td>
          </tr>
          {% endfor %}
      </tbody>
  </table>
  {% else %}
  <div class="alert alert-secondary" role="alert">
      No exam records found for this course!
  </div>
  {% endif %}

</main>
{% endblock %}